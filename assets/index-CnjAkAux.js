(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();let S=!1;AFRAME.registerComponent("neon-pulse",{schema:{color:{type:"color",default:"#00fff7"}},tick:function(e,n){const t=.5+.5*Math.sin(e/500);this.el.setAttribute("material","emissiveIntensity",t),this.el.setAttribute("material","emissive",this.data.color)}});AFRAME.registerComponent("clickable-link",{schema:{url:{type:"string"}},init:function(){this.el.setAttribute("class","clickable"),this.el.addEventListener("click",()=>{window.open(this.data.url,"_blank")}),this.el.addEventListener("mouseenter",()=>{this.el.setAttribute("scale","1.1 1.1 1.1")}),this.el.addEventListener("mouseleave",()=>{this.el.setAttribute("scale","1 1 1")})}});async function q(){console.log("Chargement des projets...");try{let o=function(A){let E=A-i,l=Math.min(1,E/1e3);s.object3D.scale.set(l,l,l),l<1&&requestAnimationFrame(o)};var e=o;const t=await(await fetch("http://localhost:8000/api/projects")).json();console.log("Projets récupérés :",t);const s=document.querySelector("#projectsContainer");s.innerHTML="",s.setAttribute("visible","true"),s.object3D.scale.set(.1,.1,.1);let i=performance.now();requestAnimationFrame(o),t.forEach((A,E)=>{const l=document.createElement("a-entity");l.setAttribute("position",`0 ${-E*.8} 0`);const m=document.createElement("a-plane");m.setAttribute("width",3),m.setAttribute("height",.6),m.setAttribute("color","#001522"),m.setAttribute("material","shader: standard; emissive: #003355; emissiveIntensity: 0.4"),m.setAttribute("neon-pulse","color: #00ffff"),l.appendChild(m);const p=document.createElement("a-plane");p.setAttribute("width",3.1),p.setAttribute("height",.7),p.setAttribute("color","#00ffff"),p.setAttribute("material","shader: flat; transparent: true; opacity: 0.3"),p.setAttribute("position","0 0 0.01"),l.appendChild(p);const f=document.createElement("a-text");f.setAttribute("value",`${A.name} - ${A.technologies.join(", ")}`),f.setAttribute("color","#00ffff"),f.setAttribute("position","-1.4 0 0.02"),f.setAttribute("width",2.6),f.setAttribute("font","mozillavr"),l.appendChild(f),s.appendChild(l),l.object3D.scale.set(.8,.8,.8),setTimeout(()=>{let x=performance.now();function C(R){let j=R-x,v=Math.min(1,.8+.2*j/500);l.object3D.scale.set(v,v,v),v<1&&requestAnimationFrame(C)}requestAnimationFrame(C)},E*150)});const r=document.createElement("a-entity");r.setAttribute("position",`0 ${-t.length*.8-.8} 0`);const y=document.createElement("a-plane");y.setAttribute("width",3),y.setAttribute("height",.6),y.setAttribute("color","#330022"),y.setAttribute("material","shader: standard; emissive: #ff0077; emissiveIntensity: 0.5"),r.appendChild(y);const c=document.createElement("a-plane");c.setAttribute("width",3.1),c.setAttribute("height",.7),c.setAttribute("color","#ff0077"),c.setAttribute("material","shader: flat; transparent: true; opacity: 0.3"),c.setAttribute("position","0 0 0.01"),r.appendChild(c);const u=document.createElement("a-text");u.setAttribute("value","Voir mon GitHub"),u.setAttribute("color","#c2005a"),u.setAttribute("position","-1.2 0 0.02"),u.setAttribute("width",2.6),u.setAttribute("font","mozillavr"),r.appendChild(u);const d=document.createElement("a-plane");d.setAttribute("width",3),d.setAttribute("height",.6),d.setAttribute("position","0 0 0.03"),d.setAttribute("material","opacity: 0; transparent: true;"),d.setAttribute("clickable-link","url: https://github.com/Askynnzz"),r.appendChild(d),s.appendChild(r)}catch(n){console.error("Erreur de chargement des projets :",n)}}let B=!1;window.addEventListener("click",()=>{if(!B){const e=document.getElementById("backgroundMusic");e.volume=.1,e.play(),B=!0,console.log("Musique lancée !")}});document.addEventListener("DOMContentLoaded",function(){document.querySelector("#sf2-video").play().catch(n=>{console.log("Autoplay failed:",n)})});let h=null,g=null,k=!1;const I=document.querySelectorAll("#menuOptions li");let a=0;const w=document.getElementById("navSound"),D=document.getElementById("clickSound"),z=document.getElementById("enterSound");function T(e){a=e,I.forEach((n,t)=>{n.classList.toggle("selected",t===a)})}function L(e){return{x:e.x,y:e.y,z:e.z}}function b(e){const n=document.getElementById("popupMenu"),t=document.querySelector("#mainCamera");if(e&&!k){k=!0,D.play();const s=t.getAttribute("position");h=L(s);const i=t.getAttribute("rotation");g=L(i),setTimeout(()=>{t.setAttribute("look-controls","enabled",!1),t.setAttribute("wasd-controls","enabled",!1),t.setAttribute("position",{x:0,y:4,z:-.4}),z.play(),n.classList.add("active"),T(0)},600)}else k=!1,h&&t.setAttribute("position",h),g&&t.setAttribute("rotation",g),t.setAttribute("look-controls","enabled",!0),t.setAttribute("wasd-controls","enabled",!0),n.classList.remove("active")}window.addEventListener("keydown",e=>{const n=document.getElementById("valideSound");if(k)if(e.key==="ArrowDown")a=(a+1)%I.length,w.currentTime=0,w.play(),T(a);else if(e.key==="ArrowUp")a=(a-1+I.length)%I.length,w.currentTime=0,w.play(),T(a);else if(e.key==="Enter")switch(n.play(),a){case 0:q(),b(!1);break;case 1:window.open("https://github.com/Askynnzz/Resume/blob/main/YassineBCV2025pdf.pdf","_blank"),b(!1);break;case 2:launchMiniGame(),b(!1);break;case 3:window.open("https://github.com/Askynnzz/rapportstage","_blank"),b(!1);break;default:console.log("Option inconnue")}else e.key==="Escape"&&b(!1)});AFRAME.registerComponent("glow-hover-model",{init:function(){const e=this.el;let n=new Map;function t(s,i){const o=e.getObject3D("mesh");o&&o.traverse(r=>{r.isMesh&&(n.has(r.uuid)||n.set(r.uuid,r.material.emissive.clone()),r.material.emissive=new THREE.Color(s),r.material.emissiveIntensity=i,r.material.needsUpdate=!0)})}e.addEventListener("mouseenter",()=>t("#ffffff",.7)),e.addEventListener("mouseleave",()=>{const s=e.getObject3D("mesh");s&&s.traverse(i=>{if(i.isMesh){const o=n.get(i.uuid);o?i.material.emissive.copy(o):i.material.emissive.set(0),i.material.emissiveIntensity=0,i.material.needsUpdate=!0}})})}});AFRAME.registerComponent("video-texture",{init:function(){const e=document.querySelector("#sf2-video");this.el.addEventListener("model-loaded",()=>{const n=this.el.getObject3D("mesh");n&&n.traverse(t=>{t.isMesh&&t.material.name==="Street_Fighter_II"&&(t.material.map=new THREE.VideoTexture(e),t.material.map.minFilter=THREE.LinearFilter,t.material.map.magFilter=THREE.LinearFilter,t.material.map.format=THREE.RGBFormat,t.material.needsUpdate=!0)})})}});AFRAME.registerComponent("arcade-launch",{init:function(){this.el.addEventListener("click",()=>{b(!0)})}});window.launchMiniGame=function(){const e=document.getElementById("gameContainer"),n=document.getElementById("gameFrame");n.src="snakefinal/index.html",e.style.display="block";const t=e.querySelector(".crt-effect");t&&(t.classList.remove("crt-effect"),t.offsetWidth,t.classList.add("crt-effect"))};window.closeGame=function(){const e=document.getElementById("gameContainer"),n=document.getElementById("gameFrame");e.classList.add("closing");const t=document.getElementById("closeSound");t.currentTime=0,t.play(),setTimeout(()=>{e.style.display="none",n.src="",e.classList.remove("closing")},500)};function P(e){const n=document.getElementById("bootIntro"),t=document.getElementById("typeSound"),s=[">> SYSTEM BOOTING...",">> MEMORY OK",">> CONNECTING TO SKILL MODULE...",">> MODULE LOADED ✓",">> DISPLAYING DATA..."];n.innerText="",n.style.display="block";let i=0;const o=setInterval(()=>{i<s.length?(n.innerText+=s[i]+`
`,t.currentTime=0,t.play(),i++):(clearInterval(o),setTimeout(()=>{n.style.display="none",t.pause(),t.currentTime=0,e()},800))},600)}AFRAME.registerComponent("skills-launch",{init:function(){this.el.addEventListener("click",()=>{if(S)return;S=!0;const e=document.querySelector("#mainCamera"),n=document.getElementById("clickSound"),t=document.getElementById("enterSound"),s=document.getElementById("skillsCRT");h=L(e.getAttribute("position")),g=L(e.getAttribute("rotation")),e.setAttribute("look-controls","enabled",!1),e.setAttribute("wasd-controls","enabled",!1),e.setAttribute("position",{x:-3.1,y:2.1,z:-6.2}),n.play(),setTimeout(()=>{P(()=>{s.classList.add("showing"),s.style.display="block",t.play()})},500)})}});window.addEventListener("keydown",e=>{if(e.key==="Escape"&&document.getElementById("skillsCRT").style.display==="block"){S=!1;const n=document.querySelector("#mainCamera"),t=document.getElementById("skillsCRT"),s=document.getElementById("closeSound");n.setAttribute("position",h),n.setAttribute("rotation",g),n.setAttribute("look-controls","enabled",!0),n.setAttribute("wasd-controls","enabled",!0),t.style.display="none",t.classList.remove("showing"),s.currentTime=0,s.play()}});window.addEventListener("load",()=>{const e=document.getElementById("loadingScreen"),n=document.getElementById("startPrompt"),t=document.getElementById("loadingText");setTimeout(()=>{t.style.display="none",n.style.display="block",n.addEventListener("click",()=>{e.style.opacity="0",setTimeout(()=>{e.remove()},1e3);const s=document.getElementById("backgroundMusic");s&&(s.volume=.2,s.play().catch(()=>{}))})},2e3)});const O=15,F=[];for(let e=1;e<=O;e++)F.push(`#idle${e}`);let M=0;setInterval(()=>{document.querySelector("#idleSprite").setAttribute("src",F[M%O]),M++},100);
