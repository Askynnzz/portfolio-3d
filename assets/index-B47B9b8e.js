(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();let S=!1;AFRAME.registerComponent("neon-pulse",{schema:{color:{type:"color",default:"#00fff7"}},tick:function(e,t){const n=.5+.5*Math.sin(e/500);this.el.setAttribute("material","emissiveIntensity",n),this.el.setAttribute("material","emissive",this.data.color)}});AFRAME.registerComponent("clickable-link",{schema:{url:{type:"string"}},init:function(){this.el.setAttribute("class","clickable"),this.el.addEventListener("click",()=>{window.open(this.data.url,"_blank")}),this.el.addEventListener("mouseenter",()=>{this.el.setAttribute("scale","1.1 1.1 1.1")}),this.el.addEventListener("mouseleave",()=>{this.el.setAttribute("scale","1 1 1")})}});async function z(){console.log("Chargement des projets...");try{let s=function(A){let E=A-o,l=Math.min(1,E/1e3);i.object3D.scale.set(l,l,l),l<1&&requestAnimationFrame(s)};var e=s;const n=await(await fetch("http://localhost:8000/api/projects")).json();console.log("Projets récupérés :",n);const i=document.querySelector("#projectsContainer");i.innerHTML="",i.setAttribute("visible","true"),i.object3D.scale.set(.1,.1,.1);let o=performance.now();requestAnimationFrame(s),n.forEach((A,E)=>{const l=document.createElement("a-entity");l.setAttribute("position",`0 ${-E*.8} 0`);const m=document.createElement("a-plane");m.setAttribute("width",3),m.setAttribute("height",.6),m.setAttribute("color","#001522"),m.setAttribute("material","shader: standard; emissive: #003355; emissiveIntensity: 0.4"),m.setAttribute("neon-pulse","color: #00ffff"),l.appendChild(m);const p=document.createElement("a-plane");p.setAttribute("width",3.1),p.setAttribute("height",.7),p.setAttribute("color","#00ffff"),p.setAttribute("material","shader: flat; transparent: true; opacity: 0.3"),p.setAttribute("position","0 0 0.01"),l.appendChild(p);const f=document.createElement("a-text");f.setAttribute("value",`${A.name} - ${A.technologies.join(", ")}`),f.setAttribute("color","#00ffff"),f.setAttribute("position","-1.4 0 0.02"),f.setAttribute("width",2.6),f.setAttribute("font","mozillavr"),l.appendChild(f),i.appendChild(l),l.object3D.scale.set(.8,.8,.8),setTimeout(()=>{let F=performance.now();function B(x){let R=x-F,v=Math.min(1,.8+.2*R/500);l.object3D.scale.set(v,v,v),v<1&&requestAnimationFrame(B)}requestAnimationFrame(B)},E*150)});const r=document.createElement("a-entity");r.setAttribute("position",`0 ${-n.length*.8-.8} 0`);const y=document.createElement("a-plane");y.setAttribute("width",3),y.setAttribute("height",.6),y.setAttribute("color","#330022"),y.setAttribute("material","shader: standard; emissive: #ff0077; emissiveIntensity: 0.5"),r.appendChild(y);const c=document.createElement("a-plane");c.setAttribute("width",3.1),c.setAttribute("height",.7),c.setAttribute("color","#ff0077"),c.setAttribute("material","shader: flat; transparent: true; opacity: 0.3"),c.setAttribute("position","0 0 0.01"),r.appendChild(c);const u=document.createElement("a-text");u.setAttribute("value","Voir mon GitHub"),u.setAttribute("color","#c2005a"),u.setAttribute("position","-1.2 0 0.02"),u.setAttribute("width",2.6),u.setAttribute("font","mozillavr"),r.appendChild(u);const d=document.createElement("a-plane");d.setAttribute("width",3),d.setAttribute("height",.6),d.setAttribute("position","0 0 0.03"),d.setAttribute("material","opacity: 0; transparent: true;"),d.setAttribute("clickable-link","url: https://github.com/Askynnzz"),r.appendChild(d),i.appendChild(r)}catch(t){console.error("Erreur de chargement des projets :",t)}}let C=!1;window.addEventListener("click",()=>{if(!C){const e=document.getElementById("backgroundMusic");e.volume=.1,e.play(),C=!0,console.log("Musique lancée !")}});document.addEventListener("DOMContentLoaded",function(){document.querySelector("#sf2-video").play().catch(t=>{console.log("Autoplay failed:",t)})});let h=null,g=null,w=!1;const k=document.querySelectorAll("#menuOptions li");let a=0;const I=document.getElementById("navSound"),P=document.getElementById("clickSound"),q=document.getElementById("enterSound");function T(e){a=e,k.forEach((t,n)=>{t.classList.toggle("selected",n===a)})}function L(e){return{x:e.x,y:e.y,z:e.z}}function b(e){const t=document.getElementById("popupMenu"),n=document.querySelector("#mainCamera");if(e&&!w){w=!0,P.play();const i=n.getAttribute("position");h=L(i);const o=n.getAttribute("rotation");g=L(o),setTimeout(()=>{n.setAttribute("look-controls","enabled",!1),n.setAttribute("wasd-controls","enabled",!1),n.setAttribute("position",{x:0,y:4,z:-.4}),q.play(),t.classList.add("active"),T(0)},600)}else w=!1,h&&n.setAttribute("position",h),g&&n.setAttribute("rotation",g),n.setAttribute("look-controls","enabled",!0),n.setAttribute("wasd-controls","enabled",!0),t.classList.remove("active")}window.addEventListener("keydown",e=>{const t=document.getElementById("valideSound");if(w)if(e.key==="ArrowDown")a=(a+1)%k.length,I.currentTime=0,I.play(),T(a);else if(e.key==="ArrowUp")a=(a-1+k.length)%k.length,I.currentTime=0,I.play(),T(a);else if(e.key==="Enter")switch(t.play(),a){case 0:z(),G(),b(!1);break;case 1:window.open("https://github.com/Askynnzz/Resume/blob/main/YassineBCV2025pdf.pdf","_blank"),b(!1);break;case 2:launchMiniGame(),b(!1);break;case 3:window.open("https://github.com/Askynnzz/rapportstage","_blank"),b(!1);break;default:console.log("Option inconnue")}else e.key==="Escape"&&b(!1)});AFRAME.registerComponent("glow-hover-model",{init:function(){const e=this.el;let t=new Map;function n(i,o){const s=e.getObject3D("mesh");s&&s.traverse(r=>{r.isMesh&&(t.has(r.uuid)||t.set(r.uuid,r.material.emissive.clone()),r.material.emissive=new THREE.Color(i),r.material.emissiveIntensity=o,r.material.needsUpdate=!0)})}e.addEventListener("mouseenter",()=>n("#ffffff",.7)),e.addEventListener("mouseleave",()=>{const i=e.getObject3D("mesh");i&&i.traverse(o=>{if(o.isMesh){const s=t.get(o.uuid);s?o.material.emissive.copy(s):o.material.emissive.set(0),o.material.emissiveIntensity=0,o.material.needsUpdate=!0}})})}});AFRAME.registerComponent("video-texture",{init:function(){const e=document.querySelector("#sf2-video");this.el.addEventListener("model-loaded",()=>{const t=this.el.getObject3D("mesh");t&&t.traverse(n=>{n.isMesh&&n.material.name==="Street_Fighter_II"&&(n.material.map=new THREE.VideoTexture(e),n.material.map.minFilter=THREE.LinearFilter,n.material.map.magFilter=THREE.LinearFilter,n.material.map.format=THREE.RGBFormat,n.material.needsUpdate=!0)})})}});AFRAME.registerComponent("arcade-launch",{init:function(){this.el.addEventListener("click",()=>{b(!0)})}});window.launchMiniGame=function(){const e=document.getElementById("gameContainer"),t=document.getElementById("gameFrame");t.src="snakefinal/index.html",e.style.display="block";const n=e.querySelector(".crt-effect");n&&(n.classList.remove("crt-effect"),n.offsetWidth,n.classList.add("crt-effect"))};window.closeGame=function(){const e=document.getElementById("gameContainer"),t=document.getElementById("gameFrame");e.classList.add("closing");const n=document.getElementById("closeSound");n.currentTime=0,n.play(),setTimeout(()=>{e.style.display="none",t.src="",e.classList.remove("closing")},500)};function D(e){const t=document.getElementById("bootIntro"),n=document.getElementById("typeSound"),i=[">> SYSTEM BOOTING...",">> MEMORY OK",">> CONNECTING TO SKILL MODULE...",">> MODULE LOADED ✓",">> DISPLAYING DATA..."];t.innerText="",t.style.display="block";let o=0;const s=setInterval(()=>{o<i.length?(t.innerText+=i[o]+`
`,n.currentTime=0,n.play(),o++):(clearInterval(s),setTimeout(()=>{t.style.display="none",n.pause(),n.currentTime=0,e()},800))},600)}AFRAME.registerComponent("skills-launch",{init:function(){this.el.addEventListener("click",()=>{if(S)return;S=!0;const e=document.querySelector("#mainCamera"),t=document.getElementById("clickSound"),n=document.getElementById("enterSound"),i=document.getElementById("skillsCRT");h=L(e.getAttribute("position")),g=L(e.getAttribute("rotation")),e.setAttribute("look-controls","enabled",!1),e.setAttribute("wasd-controls","enabled",!1),e.setAttribute("position",{x:-3.1,y:2.1,z:-6.2}),t.play(),setTimeout(()=>{D(()=>{i.classList.add("showing"),i.style.display="block",n.play()})},500)})}});window.addEventListener("keydown",e=>{if(e.key==="Escape"&&document.getElementById("skillsCRT").style.display==="block"){S=!1;const t=document.querySelector("#mainCamera"),n=document.getElementById("skillsCRT"),i=document.getElementById("closeSound");t.setAttribute("position",h),t.setAttribute("rotation",g),t.setAttribute("look-controls","enabled",!0),t.setAttribute("wasd-controls","enabled",!0),n.style.display="none",n.classList.remove("showing"),i.currentTime=0,i.play()}});window.addEventListener("load",()=>{const e=document.getElementById("loadingScreen"),t=document.getElementById("startPrompt"),n=document.getElementById("loadingText");setTimeout(()=>{n.style.display="none",t.style.display="block",t.addEventListener("click",()=>{e.style.opacity="0",setTimeout(()=>{e.remove()},1e3);const i=document.getElementById("backgroundMusic");i&&(i.volume=.2,i.play().catch(()=>{}))})},2e3)});const j=15,O=[];for(let e=1;e<=j;e++)O.push(`#idle${e}`);let M=0;setInterval(()=>{document.querySelector("#idleSprite").setAttribute("src",O[M%j]),M++},100);function G(){const e=document.getElementById("projectInfo");e&&e.remove();const t=document.createElement("div");t.id="projectInfo",t.className="popup-info",t.innerHTML=`
    <h2>📁 Mes projets</h2>
    <p>Mes projets sont en cours de connexion avec une API.<br>
    En attendant, vous pouvez consulter mon GitHub 👇</p>
    <a href="https://github.com/Askynnzz" target="_blank">🔗 github.com/Askynnzz</a><br><br>
    <button id="closeProjectBtn">Fermer</button>
  `,document.body.appendChild(t),document.getElementById("closeProjectBtn").addEventListener("click",window.closeProjectInfo)}window.closeProjectInfo=function(){const e=document.getElementById("projectInfo");if(!e)return;const t=document.getElementById("closeSound");t.currentTime=0,t.play(),e.classList.add("closing"),setTimeout(()=>{e.remove()},500)};
